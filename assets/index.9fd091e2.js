import{j as e,r as s,F as k,a as o,D as B,u as L,b as E,O as P,A as I,C,X as v,Y as A,T as w,c as b,B as M,d as K,P as W,e as z,M as F,f as R,g as V,k as $,Q as D,h as H,i as Q,l as X}from"./vendor.31ac6e7e.js";import"./__commonjsHelpers__.7619f2af.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();const Y=t=>e("span",{className:"animate-fade-from-bottom inline-block",children:t.children});const Z=t=>{const{sequence:n,setSequence:i}=t;s.exports.useEffect(()=>{const r=l=>{if(l.key==="Backspace")i(a=>a.slice(0,-1));else if(l.key==="Enter")n.length>0&&t.setIsSubmited(!0);else if(l.key.match(/^[acguACGUtT]$/))if(t.type==="DNA"&&l.key.toLocaleUpperCase()==="T")i(a=>a+"U");else if(t.type==="RNA"&&l.key.toLocaleUpperCase()==="U"){i(a=>a+"T");return}else i(a=>a+l.key.toLocaleUpperCase())};return document.addEventListener("keydown",r,!1),()=>{document.removeEventListener("keydown",r,!1)}},[t.type]);const c=r=>{const l=new FileReader;l.readAsText(r.target.files[0]),l.onload=()=>{var p;let a=(p=l.result)==null?void 0:p.toString().replace(/[tT]/,"U");a=a==null?void 0:a.replace(/(\r\n|\n|\r)/gm,""),t.setSequence(a==null?void 0:a.replace(/(?![AUGCaugc])[A-z]/g,"").toUpperCase())}};return e(k,{children:o("div",{className:"p-5 w-96 rounded-xl absolute right-0 text-white border-purple-500 border-2 inputContent",children:[n.length>0?[...n].map((r,l)=>e(k,{children:e(Y,{children:r},l)})):"\xA0",e("input",{type:"file",className:"hidden",id:"file",accept:".txt",onInput:r=>c(r)}),e("label",{htmlFor:"file",children:e(B,{className:"btnIcon"})})]})})},J=t=>{const n=s.exports.useRef(null),i=s.exports.useRef(null);let c="",r="";switch(t.last){case"A":c="#DD7AD4",r="#7ADD7D";break;case"C":c="#D9DD7A",r="#7A8EDD";break;case"G":c="#7A8EDD",r="#D9DD7A";break;case"U":c="#7ADD7D",r="#DD7AD4";break;case"T":c="#7ADD7D",r="#DD7AD4";break}return s.exports.useEffect(()=>{n.current.rotation.z=90*Math.PI/180,n.current.position.x=-2.5,i.current.rotation.z=90*Math.PI/180,i.current.position.x=2.5}),o(k,{children:[o("mesh",{ref:n,children:[e("cylinderGeometry",{args:[.4,.4,5,35]}),e("meshLambertMaterial",{color:c})]}),o("mesh",{ref:i,children:[e("cylinderGeometry",{args:[.4,.4,5,35]}),e("meshLambertMaterial",{color:r})]})]})},_=t=>{const n=s.exports.useRef(null);return s.exports.useEffect(()=>{n.current.position.x=6}),o("mesh",{ref:n,children:[e("sphereGeometry",{}),e("meshLambertMaterial",{color:"#ffffff"})]})},ee=t=>{const n=s.exports.useRef(null);return s.exports.useEffect(()=>{n.current.position.x=-5}),o("mesh",{ref:n,children:[e("sphereGeometry",{}),e("meshLambertMaterial",{color:"#ffffff"})]})},te=t=>{const n=s.exports.useRef(null);let i=-1.5*t.i,c=.2*t.i;return s.exports.useEffect(()=>{n.current.rotation.y=.2*(t.i-1),n.current.position.y=(t.i-1)*-1.5},[]),L(()=>{n.current.position.y>i&&(n.current.position.y-=.1),n.current.rotation.y<c&&(n.current.rotation.y+=.01)}),o("group",{ref:n,children:[e(J,{last:t.last}),e(_,{}),e(ee,{})]})},ne=t=>{const n=s.exports.useRef(null),i=s.exports.useRef(),c=r=>{const l=s.exports.useRef(),{camera:a}=E();return L(()=>{l.current&&(l.current.minPolarAngle=Math.PI/2,l.current.maxPolarAngle=Math.PI/2,l.current.target.set(0,-30,0),l.current.update(),i.current.position.copy(a.position))}),e(P,{ref:l,args:[a],...r,enableZoom:!1})};return L(()=>{!n.current||(n.current.rotation.y+=.01)}),o(k,{children:[o("group",{ref:n,children:[t.seq.split("").map((r,l)=>(console.log(r.length),e(k,{children:e(te,{i:l,last:r.slice(-1)})}))),e(c,{})]}),e("pointLight",{position:[20,-30,0],intensity:1.5,ref:i})]})},re=t=>{const n={width:"50%",left:0},i={width:"50%",left:"50%"};return s.exports.useEffect(()=>{t.sequence.includes("T")?t.setType("RNA"):t.sequence.includes("U")?t.setType("DNA"):t.setType("")},[t.sequence]),o("div",{className:"flex border p-5 rounded-xl border-purple-500 absolute right-[400px] cursor-pointer",onClick:()=>{t.type==="RNA"?(t.setType("DNA"),t.setSequence(t.sequence.replaceAll("T","U"))):t.type==="DNA"&&(t.setType("RNA"),t.setSequence(t.sequence.replaceAll("U","T")))},children:[e("div",{className:"pr-2",children:"RNA"}),e("div",{className:"pl-2",children:"DNA"}),e("div",{style:t.type==="RNA"?i:t.type==="DNA"?n:void 0,className:"w-full h-full absolute bg-purple-500 rounded-xl top-0 left-0 flex items-center text-extrabold justify-center transition-all duration-500",children:t.type==""&&e("span",{children:"Nieznany"})})]})},le=()=>{const[t,n]=s.exports.useState(!1);return o("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),className:"absolute left-8 bg-purple-700 bottom-8 w-16 h-16 rounded-full",children:[e("p",{className:"text-center  leading-[64px] text-xl text-extrabold",children:"?"}),t&&o("div",{className:"w-52 absolute left-6 bottom-16 bg-gray-800 p-5 rounded-lg transition-all animate-fade-in",children:[e("p",{children:"Wejscie przyjmuje nastepujace wartosci"}),o("ul",{children:[e("li",{children:"A - Adenina"}),e("li",{children:"C - Cytozyna"}),e("li",{children:"G - Guanina"}),e("li",{children:"T - Tymina [RNA] "}),e("li",{children:"U - Uracyl [DNA] "})]})]})]})},oe=t=>e("button",{onClick:()=>{t.setSequence("")},className:"bg-purple-500 p-5 rounded-xl w-full",children:"Wyczysc"}),ie=t=>e("button",{onClick:()=>{t.sequence.length>0&&t.setIsSubmited(!0)},className:"bg-purple-500 p-5 rounded-xl w-full",children:"Przeslij"}),se=t=>o("div",{className:"absolute right-0 w-96 flex justify-between items-center gap-6",style:{top:`calc(16rem + ${t.sequence.length>0?(Math.ceil(t.sequence.length/29)-1)*1.5:0}rem)`},children:[e(oe,{setSequence:t.setSequence}),e(ie,{setIsSubmited:t.setIsSubmited,sequence:t.sequence})]});const q=t=>e("div",{className:"w-screen h-[10%] p-2 flex justify-center opacity",children:o("svg",{onClick:async()=>{window.scrollBy({top:-window.innerHeight,behavior:"smooth"}),setTimeout(()=>{t.onClick&&t.onClick()},1e3)},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-16 h-16 p-4 bg-black rounded-full cursor-pointer",children:[e("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),e("polyline",{points:"5 12 12 5 19 12"})]})}),ae=t=>{const n=s.exports.useRef(null),[i,c]=s.exports.useState({width:0,height:0});return s.exports.useEffect(()=>{n.current&&(console.log(t.proteinInfo.info),c({height:n.current.offsetHeight,width:n.current.offsetWidth}))},[n.current,t.isChartVisible,t.proteinInfo]),o("div",{className:"w-screen h-screen overflow-y-scroll overflow-x-hidden",children:[e(q,{}),t.proteinInfo&&e("div",{className:"flex w-full h-full",children:t.isChartVisible&&o("table",{className:"mt-2 h-min w-full",children:[e("thead",{children:o("tr",{children:[e("th",{className:"text-white text-2xl",children:" "}),t.proteinInfo.info.map((r,l)=>e("th",{style:{width:`${100/t.proteinInfo.info.length}%`},className:`text-white text-2xl px-1.5 ${l<t.proteinInfo.sequence.length-1?"border-r-2 border-r-white":""}`,children:r.letter},l))]})}),o("tbody",{children:[o("tr",{children:[e("td",{className:"text-white text-2xl px-1.5 text-right",children:"Masa"}),e("td",{colSpan:t.proteinInfo.sequence.length,className:"w-full",ref:n,children:o(I,{margin:{top:20,left:-20,right:30},width:i.width,height:150,data:t.proteinInfo.info,children:[e("defs",{children:o("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#8748b8",stopOpacity:.8}),e("stop",{offset:"95%",stopColor:"#8748b8",stopOpacity:.1})]})}),e(C,{strokeDasharray:"3 3"}),e(v,{dataKey:"letter"}),e(A,{}),e(w,{formatter:(r,l)=>[r+"g/mol",l],itemStyle:{color:"#000000"},contentStyle:{color:"#581C87"}}),e(b,{type:"monotone",dataKey:"weight",stroke:"#8748b8",fillOpacity:1,fill:"url(#colorUv)"})]})})]}),o("tr",{children:[e("td",{className:"text-white text-2xl px-1.5 text-right",children:"Indeks hydrofobowy"}),e("td",{colSpan:t.proteinInfo.sequence.length,className:"w-full",ref:n,children:o(I,{margin:{top:20,left:-20,right:30},width:i.width,height:150,data:t.proteinInfo.info,children:[e("defs",{children:o("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#8748b8",stopOpacity:.8}),e("stop",{offset:"95%",stopColor:"#8748b8",stopOpacity:.1})]})}),e(C,{strokeDasharray:"3 3"}),e(v,{dataKey:"letter"}),e(A,{}),e(w,{itemStyle:{color:"#000000"},contentStyle:{color:"#581C87"}}),e(b,{type:"monotone",dataKey:"hydropathyIndex",stroke:"#8748b8",fillOpacity:1,fill:"url(#colorUv)"})]})})]}),o("tr",{children:[e("td",{className:"text-white text-2xl px-1.5 text-right",children:"pKa"}),e("td",{colSpan:t.proteinInfo.sequence.length,className:"w-full",ref:n,children:o(I,{margin:{top:20,left:-20,right:30},width:i.width,height:150,data:t.proteinInfo.info,children:[o("defs",{children:[o("linearGradient",{id:"color1",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#8748b8",stopOpacity:.8}),e("stop",{offset:"95%",stopColor:"#8748b8",stopOpacity:.1})]}),o("linearGradient",{id:"color2",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#48b8a9",stopOpacity:.8}),e("stop",{offset:"95%",stopColor:"#48b8a9",stopOpacity:.1})]}),o("linearGradient",{id:"color3",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#b84848",stopOpacity:.8}),e("stop",{offset:"95%",stopColor:"#b84848",stopOpacity:.1})]})]}),e(C,{strokeDasharray:"3 3"}),e(v,{dataKey:"letter"}),e(A,{}),e(w,{formatter:(r,l,a)=>[r,l.toString().substring(4,l.toString().length)],itemStyle:{color:"#000000"},contentStyle:{color:"#581C87"}}),e(b,{type:"monotone",dataKey:"pka.pka1",stroke:"#8748b8",fillOpacity:1,fill:"url(#color1)"}),e(b,{type:"monotone",dataKey:"pka.pka2",stroke:"#48b8a9",fillOpacity:1,fill:"url(#color2)"}),e(b,{type:"monotone",dataKey:"pka.pka3",stroke:"#b84848",fillOpacity:1,fill:"url(#color3)"})]})})]}),o("tr",{children:[e("td",{className:"text-white text-2xl px-1.5 text-right",children:"Punkt izoelektryczny"}),e("td",{colSpan:t.proteinInfo.sequence.length,className:"w-full",ref:n,children:o(I,{margin:{top:20,left:-20,right:30},width:i.width,height:150,data:t.proteinInfo.info,children:[e("defs",{children:o("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"5%",stopColor:"#8748b8",stopOpacity:.8}),e("stop",{offset:"95%",stopColor:"#8748b8",stopOpacity:.1})]})}),e(C,{strokeDasharray:"3 3"}),e(v,{dataKey:"letter"}),e(A,{}),e(w,{itemStyle:{color:"#000000"},contentStyle:{color:"#581C87"}}),e(b,{type:"monotone",dataKey:"pi",stroke:"#8748b8",fillOpacity:1,fill:"url(#colorUv)"})]})})]}),o("tr",{children:[e("td",{className:"text-white text-2xl px-1.5 text-right",children:"Polarno\u015B\u0107"}),e("td",{colSpan:t.proteinInfo.sequence.length,className:"w-full",ref:n,children:o(M,{margin:{top:20,left:-20,right:30},width:i.width,height:150,data:t.proteinInfo.info,children:[e(C,{strokeDasharray:"3 3"}),e(v,{dataKey:"letter"}),e(A,{}),e(w,{formatter:(r,l)=>[r?"Polarny":"Nie polarny","Polarno\u015B\u0107"],contentStyle:{color:"#581C87"}}),e(K,{dataKey:"polarity",fill:"#8748b8"})]})})]}),o("tr",{children:[e("td",{className:"text-white text-2xl px-1.5 text-right",children:"Wyst\u0119powanie aminokwasu w bia\u0142ku"}),e("td",{colSpan:t.proteinInfo.sequence.length,className:"w-full",ref:n,children:o(W,{className:"ml-auto mr-auto",margin:{top:20,left:-20,right:30},width:i.width/2,height:i.width/3,children:[e(z,{data:t.proteinInfo.info,dataKey:"residue",nameKey:"letter",cx:"50%",cy:"50%",outerRadius:120,fill:"#8748b8",label:!0}),e(w,{contentStyle:{color:"#581C87"},formatter:(r,l)=>[r+"%",l]})]})})]})]})]})})]})},ce=t=>e("div",{className:"h-[10%] flex justify-center items-center opacity",children:e("div",{className:"cursor-pointer",children:o("svg",{onClick:()=>{window.scrollBy({top:window.innerHeight,behavior:"smooth"}),t.setIsChartVisible(!0)},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-16 h-16 p-4 bg-black rounded-full",children:[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("polyline",{points:"5 12 12 19 19 12"})]})})}),de=()=>e("div",{className:"h-[10%] flex justify-center items-center rotate-[270deg] absolute top-[50%] translate-y-[-100%] right-5 opacity",children:e("div",{className:"cursor-pointer",children:o("svg",{onClick:()=>{window.scrollBy({left:window.innerWidth,behavior:"smooth"})},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-16 h-16 p-4 bg-black rounded-full",children:[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("polyline",{points:"5 12 12 19 19 12"})]})})}),he=()=>e("div",{className:"h-[10%] flex justify-center items-center rotate-[90deg] absolute top-[50%] translate-y-[-100%] left-5 opacity",children:e("div",{className:"cursor-pointer",children:o("svg",{onClick:()=>{window.scrollBy({left:-window.innerWidth,behavior:"smooth"})},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-16 h-16 p-4 bg-black rounded-full",children:[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("polyline",{points:"5 12 12 19 19 12"})]})})}),ue=t=>{const[n,i]=s.exports.useState(""),[c,r]=s.exports.useState(0),[l,a]=s.exports.useState(!0),[p,y]=s.exports.useState(!1),[S,U]=s.exports.useState(0),[u,f]=s.exports.useState("");function d(){t.setIsSubmited(!1)}function m(h,N){let g=new FileReader;g.onload=function(x){var T;N((T=x.target)==null?void 0:T.result)},g.readAsDataURL(h)}const j=(h,N)=>{a(!0);const g=URL.createObjectURL(h),x=new Image;x.src=g,x.onload=()=>{N(x),console.log(x),a(!1)}},G=async()=>{await R.get(`https://www.grondihub.live/api/sequenceImg/${t.seq}`,{responseType:"blob"}).then(h=>{m(h.data,N=>{i(N),j(h.data,g=>{r(g.width*.6)})})}).catch(()=>{a(!1),y(!0)})},O=async()=>{await R.get(`https://www.grondihub.live/api/proteinWeight/${t.seq}`).then(h=>{U(h.data.weight)}).catch(h=>{a(!1),y(!0),h.response&&(console.log(h.response),f(h.response.data))})};return s.exports.useEffect(()=>{G().then(h=>console.log(h)).catch(h=>y(!0)),O().then(h=>console.log(h)).catch(h=>y(!0))},[]),o("div",{className:"w-screen h-screen bg-purple-900 relative",children:[t.index===0?e(q,{onClick:d}):e("div",{className:"m-[5%]"}),t.index!==t.length-1&&e(de,{}),t.index<=t.length-1&&t.length-1!==0&&t.index!==0&&e(he,{}),e("div",{className:"h-[80%]",children:l?e("div",{className:"w-full h-full flex justify-center items-center",children:e(F,{})}):p?e("div",{className:"w-full h-full flex justify-center items-center",children:e("h1",{className:"text-5xl font-bold text-center",children:u.toString()})}):o("div",{className:"w-full h-full",children:[e("h1",{className:"text-5xl font-bold text-center mb-8 ",children:"Sekwencja:"}),e("div",{style:{height:"42vh",width:"100%",overflowX:"auto",padding:"2rem 0"},className:window.innerWidth<=c?"":"flex justify-center",children:e("div",{style:{height:"100%",width:c,whiteSpace:"nowrap",padding:"0 2rem"},children:e("img",{src:n,style:{height:"100%",whiteSpace:"nowrap"}})})}),e("div",{className:"flex justify-center items-center",children:o("p",{children:["Masa: ",S.toFixed(4)," ",e("sup",{children:"g"}),"\u2044",e("sub",{children:"mol"})]})}),o("div",{className:"flex w-screen justify-center mt-5",children:[e("button",{className:"bg-black text-white font-bold p-5 my-5 mr-5 rounded-xl opacity",onClick:()=>{window.open(n,"Image")},children:"Otw\xF3rz w nowej karcie"}),e("a",{href:n,download:!0,children:e("button",{className:"bg-black text-white font-bold p-5 my-5 mr-5 rounded-xl opacity",children:"Pobierz"})})]})]})}),e(ce,{setIsChartVisible:t.setIsChartVisible})]})},fe=t=>{const[n,i]=s.exports.useState(!1);return o("div",{className:"result-item",children:[e(ue,{setIsChartVisible:i,seq:t.seq,setIsSubmited:t.setIsSubmited,isSubmited:t.isSubmited,length:t.length,index:t.index}),e(ae,{proteinInfo:t.proteinInfo,isChartVisible:n})]})};function me(){const[t,n]=s.exports.useState(""),[i,c]=s.exports.useState(""),[r,l]=s.exports.useState(!1),[a,p]=s.exports.useState([]),[y,S]=s.exports.useState([]),U=u=>{for(let d=0;d<u.length;d++)if(u.slice(d,d+3)==="AUG"||u.slice(d,d+3)==="ATG"){u=u.slice(d);break}u=u.replaceAll("T","U");const f=u.match(/(AUG(?:[AUGC]{3,3})*?(?:UAG|UAA|UGA))/g)||[];if(S(f),f.length===0){let d=u.match(/.{1,3}/g);d!=null&&d.find(m=>m==="AUG"||m==="ATG")||D.error("Brak kodonu startu"),d!=null&&d.find(m=>m==="UAG"||m==="UAA"||m==="UGA")||D.error("Brak kodonu stopu"),D.error("Niepoprawna sekwencja bia\u0142ka"),l(!1);return}R.get(`https://www.grondihub.live/api/sequences/${u}`).then(d=>{p(d.data.sequences),D.dismiss(),scrollTo({top:window.innerHeight,behavior:"smooth"})}).catch(d=>{console.log(d)})};return s.exports.useEffect(()=>{scrollTo({top:0,left:0,behavior:"smooth"})},[]),s.exports.useEffect(()=>{p([]),S([]),r&&U(t)},[r]),o(k,{children:[o("div",{className:"w-screen h-screen grid grid-cols-2 grid-rows-1",children:[e("div",{className:"h-full w-full relative",children:o("div",{className:"relative top-[30%] right-10",children:[o("h1",{className:"text-5xl font-bold text-right",children:["Wprowadz sekwencje bialek","",e("span",{className:"leading-tight font-mono block text-right font-extrabold text-transparent text-8xl bg-clip-text bg-gradient-to-r from-purple-800 to-purple-400",children:i||"RNA"})]}),e(re,{sequence:t,type:i,setType:c,setSequence:n}),e(Z,{sequence:t,setSequence:n,type:i,setIsSubmited:l}),e(se,{sequence:t,setSequence:n,setIsSubmited:l})]})}),e(le,{}),e(V,{className:"h-full w-full",children:e(ne,{seq:t})})]}),e("div",{className:"result",children:r&&y.map((u,f)=>(console.log(f,a),e(fe,{seq:u,setIsSubmited:l,isSubmited:r,index:f,proteinInfo:a[f],length:y.length})))}),e($,{theme:"dark"})]})}const pe=new H;Q.createRoot(document.getElementById("root")).render(e(X,{client:pe,children:e(me,{})}));
